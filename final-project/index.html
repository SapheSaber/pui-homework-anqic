<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance Dashboard</title>
    <link rel="icon" type="image/png" href="./imgs/money-icon.png">
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://kit.fontawesome.com/bc65c4255d.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/chart.js"></script>
</head>
<body>
    <header>
        <h1 class="visually-hidden">Personal Finance Dashboard</h1>
    </header>
    <div class="sidebar">
        <div class="profile">
            <div class="avatar" aria-hidden="true"></div>
            <p>Anqi Chen</p>
        </div>
        <nav class="nav" role="navigation" aria-label="Main Navigation">
            <a href="#" class="nav-item active" aria-current="page">
                <i class="fa-solid fa-chart-line" aria-hidden="true"></i>
                <span class="visually-hidden">Go to Dashboard</span> Dashboard
            </a>
            <a href="record.html" class="nav-item">
                <i class="fa-regular fa-calendar" aria-hidden="true"></i>
                <span class="visually-hidden">View your records</span> View Records
            </a>
            <a href="add_record.html" class="nav-item">
                <i class="fa-solid fa-pen" aria-hidden="true"></i>
                <span class="visually-hidden">Add a new record</span> Add Record
            </a>
            <a href="learning.html" class="nav-item">
                <i class="fa-solid fa-graduation-cap" aria-hidden="true"></i>
                <span class="visually-hidden">Learn financial concepts</span> Learning
            </a>
        </nav>
    </div>
    
    <div class="content">
        <section class="dashboard">
            <div class="spending-section">
                <div class="spending-card">
                    <div class="spending-header">
                        <h2>Spending</h2>
                        <div class="year-filter-container">
                            <label for="year-filter" class="visually-hidden">Filter spending by year</label>
                            <select id="year-filter" title="Filter spending by year">
                                <!-- Populate available years from localStorage -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="spending-info">
                        <div class="spending-chart">
                            <canvas id="spendingChart" aria-label="Spending Chart" role="img"></canvas>
                        </div>
                        <div class="chart-legend">
                            <p>Total: $<span id="total-spending">0</span></p>
                            <ul id="category-list" aria-label="Spending Categories"></ul>
                        </div>
                    </div>
                </div>

                <div class="savings-card">
                    <div class="savings-info">
                        <div>
                            <p>Saving goal</p>
                            <div class="editable-goal">
                                <h3 id="savingsGoalDisplay">1</h3>
                                <label for="savingsGoalInput">Enter your savings goal</label>
                                <input 
                                    type="number" 
                                    id="savingsGoalInput" 
                                    name="savingsGoalInput" 
                                    min="1" 
                                    aria-required="true" 
                                    title="Enter your savings goal, must be a positive number" 
                                    placeholder="Enter your savings goal"
                                />
                                <button id="editGoalIcon" onclick="editGoal()" title="Edit Savings Goal">
                                    <i class="fa fa-pencil" aria-hidden="true"></i>
                                    <span class="visually-hidden">Edit Savings Goal</span>
                                </button>
                            </div>
                        </div>
                        <div>
                            <p class="remaining-label">Remaining</p>
                            <h3 id="remainingAmount" class="remaining-amount">0</h3>
                        </div>
                    </div>

                    <div class="saving-chart">
                        <canvas id="savingsProgressChart" aria-label="Savings Progress Chart" role="img"></canvas>
                        <div class="savings-percentage">
                            <h2 id="savingsPercentage">0</h2> 
                            <p id="totalSavedDisplay">Total Saved: 0</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="saving-chart-section">
                <div class="saving-line-header">
                    <div class="saving-header">
                        <h2>Saving Timeline</h2>
                        <p>Total: $<span id="total-saving">100</span></p>
                    </div>
                    <div class="chart-controls">
                        <button id="week-btn" aria-label="Show savings for this week">This Week</button>
                        <button id="month-btn" aria-label="Show savings for this month">This Month</button>
                        <button id="year-btn" class="active" aria-label="Show savings for this year">This Year</button>
                    </div>
                </div>
                
                <div class="saving-line-chart">
                    <canvas id="savingChart" aria-label="Saving Timeline Chart" role="img"></canvas>
                </div>
            </div>
        </section>
    </div>
</body>
</html>
